all: clean libpocketsphinx
BASE_PATH=$(shell pwd)

libpocketsphinx:
	@${CC} ${LDFLAGS} -iquote ${BASE_PATH}/src/ -I${BASE_PATH}/include/ -I${BASE_PATH}/src/  -shared -fpic -O2  src/acmod.c src/allphone_search.c src/bin_mdef.c src/common_audio/vad/vad_gmm.c src/common_audio/vad/webrtc_vad.c src/common_audio/vad/vad_filterbank.c src/common_audio/vad/vad_core.c src/common_audio/vad/vad_sp.c src/common_audio/signal_processing/division_operations.c src/common_audio/signal_processing/resample_48khz.c src/common_audio/signal_processing/resample.c src/common_audio/signal_processing/resample_fractional.c src/common_audio/signal_processing/downsample_fast.c src/common_audio/signal_processing/min_max_operations.c src/common_audio/signal_processing/cross_correlation.c src/common_audio/signal_processing/vector_scaling_operations.c src/common_audio/signal_processing/resample_by_2_internal.c src/common_audio/signal_processing/energy.c src/common_audio/signal_processing/spl_inl.c src/common_audio/signal_processing/get_scaling_square.c src/dict2pid.c src/dict.c src/fe/fe_sigproc.c src/fe/fixlog.c src/fe/fe_warp_inverse_linear.c src/fe/fe_noise.c src/fe/fe_warp.c src/fe/fe_interface.c src/fe/fe_warp_affine.c src/fe/yin.c src/fe/fe_warp_piecewise_linear.c src/feat/cmn.c src/feat/agc.c src/feat/cmn_live.c src/feat/feat.c src/feat/lda.c src/fsg_history.c src/fsg_lextree.c src/fsg_search.c src/hmm.c src/kws_detections.c src/kws_search.c src/lm/lm_trie_quant.c src/lm/ngram_model_trie.c src/lm/fsg_model.c src/lm/jsgf.c src/lm/ngram_model_set.c src/lm/ngrams_raw.c src/lm/jsgf_scanner.c src/lm/bitarr.c src/lm/ngram_model.c src/lm/lm_trie.c src/lm/jsgf_parser.c src/mdef.c src/ms_gauden.c src/ms_mgau.c src/ms_senone.c src/ngram_search.c src/ngram_search_fwdflat.c src/ngram_search_fwdtree.c src/phone_loop_search.c src/pocketsphinx.c src/ps_alignment.c src/ps_config.c src/ps_endpointer.c src/ps_lattice.c src/ps_mllr.c src/ps_vad.c src/ptm_mgau.c src/s2_semi_mgau.c src/state_align_search.c src/tmat.c src/util/strfuncs.c src/util/dtoa.c src/util/case.c src/util/filename.c src/util/slamch.c src/util/cmd_ln.c src/util/blas_lite.c src/util/blkarray_list.c src/util/vector.c src/util/mmio.c src/util/hash_table.c src/util/err.c src/util/ckd_alloc.c src/util/slapack_lite.c src/util/matrix.c src/util/bio.c src/util/heap.c src/util/priority_queue.c src/util/bitvec.c src/util/profile.c src/util/errno.c src/util/logmath.c src/util/glist.c src/util/f2c_lite.c src/util/listelem_alloc.c src/util/pio.c src/util/genrand.c src/util/soundfiles.c  -shared -fpic -O2  -o libpocketsphinx.so.0 -lm

	@chmod +x libpocketsphinx.so.0

clean:
	@rm -rf libpocketsphinx.so.0
